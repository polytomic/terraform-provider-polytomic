{"$id":"https://github.com/polytomic/app/services/polytomic/backend/s3/connection-conf","$schema":"https://json-schema.org/draft/2020-12/schema","dependentSchemas":{"auth_mode":{"oneOf":[{"properties":{"auth_mode":{"enum":["access_key_and_secret"]},"aws_access_key_id":{"description":"Access Key ID with read/write access to a bucket.","examples":["AKIAIOSFODNN7EXAMPLE"],"title":"AWS Access Key ID","type":"string"},"aws_secret_access_key":{"examples":["wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"],"sensitive":true,"title":"AWS Secret Access Key","type":"string"},"aws_user":{"readOnly":true,"title":"User ARN","type":"string"}}},{"properties":{"auth_mode":{"enum":["iam_role"]},"external_id":{"description":"External ID for the IAM role","readOnly":true,"type":"string"},"iam_role_arn":{"title":"IAM Role ARN","type":"string"}}}]},"is_single_table":{"oneOf":[{"properties":{"is_single_table":{"enum":[true]},"single_table_file_format":{"default":"csv","enum":[{"label":"CSV","value":"csv"},{"label":"JSON","value":"json"}],"title":"File format","type":"string"},"single_table_name":{"examples":["collection"],"title":"Collection name","type":"string"}}}]},"single_table_file_format":{"oneOf":[{"properties":{"single_table_file_format":{"enum":["csv"]},"skip_lines":{"default":0,"description":"Skip first N lines of each CSV file.","title":"Skip first lines","type":"integer"}}}]}},"properties":{"auth_mode":{"default":"access_key_and_secret","description":"How to authenticate with AWS. Defaults to Access Key and Secret","enum":[{"label":"Access Key and Secret","value":"access_key_and_secret"},{"label":"IAM role","value":"iam_role"}],"examples":["access_key_and_secret"],"title":"Authentication Method","type":"string"},"is_single_table":{"default":false,"description":"Treat the files as a single table.","title":"Files are time-based snapshots","type":"boolean"},"s3_bucket_name":{"description":"Bucket name (folder optional); ex: s3://polytomic/dataset","examples":["s3://polytomic/dataset"],"title":"S3 Bucket Name","type":"string"},"s3_bucket_region":{"examples":["us-east-1"],"title":"S3 Bucket Region","type":"string"}},"required":["auth_mode","s3_bucket_region","s3_bucket_name"],"type":"object"}
