{"$id":"https://github.com/polytomic/app/services/polytomic/backend/databricks/connection-conf","$schema":"https://json-schema.org/draft/2020-12/schema","dependentSchemas":{"auth_mode":{"oneOf":[{"properties":{"auth_mode":{"enum":["iam_role"]},"external_id":{"description":"External ID for the IAM role","readOnly":true,"title":"External ID","type":"string"},"iam_role_arn":{"title":"IAM Role ARN","type":"string"},"storage_credential_name":{"title":"Storage credential name","type":"string"}}},{"properties":{"auth_mode":{"enum":["access_key_and_secret"]},"aws_access_key_id":{"description":"See https://docs.polytomic.com/docs/databricks-connections#writing-to-databricks","examples":["AKIAIOSFODNN7EXAMPLE"],"title":"AWS Access Key ID (destinations only)","type":"string"},"aws_secret_access_key":{"examples":["wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"],"sensitive":true,"title":"AWS Secret Access Key (destinations only)","type":"string"},"aws_user":{"readOnly":true,"title":"User ARN (destinations only)","type":"string"}}}]},"cloud_provider":{"oneOf":[{"properties":{"auth_mode":{"default":"access_key_and_secret","description":"How to authenticate with AWS. Defaults to Access Key and Secret","enum":[{"label":"Access Key and Secret","value":"access_key_and_secret"},{"label":"IAM role","value":"iam_role"}],"examples":["access_key_and_secret"],"title":"Authentication Method","type":"string"},"cloud_provider":{"enum":["aws"]},"s3_bucket_name":{"description":"Name of bucket used for staging data load files","examples":["s3://polytomic-databricks-results/customer-dataset"],"title":"S3 Bucket Name (destinations only)","type":"string"},"s3_bucket_region":{"description":"Region of bucket.example=us-east-1","title":"S3 Bucket Region (destinations only)","type":"string"},"set_retention_properties":{"title":"Configure data retention for tables","type":"boolean"}}},{"properties":{"azure_access_key":{"description":"The access key associated with this storage account","examples":["abcdefghijklmnopqrstuvwxyz0123456789/+ABCDEabcdefghijklmnopqrstuvwxyz0123456789/+ABCDE=="],"sensitive":true,"title":"Storage Account Access Key (destination support only)","type":"string"},"azure_account_name":{"description":"The account name of the storage account","examples":["account"],"title":"Storage Account Name (destination support only)","type":"string"},"cloud_provider":{"enum":["azure"]},"container_name":{"description":"The container which we will stage files in","examples":["container"],"title":"Storage Container Name (destination support only)","type":"string"}}}]},"enforce_query_limit":{"oneOf":[{"properties":{"concurrent_queries":{"title":"Concurrent query limit","type":"integer"},"enforce_query_limit":{"enum":[true]}}}]},"set_retention_properties":{"oneOf":[{"properties":{"deleted_file_retention_days":{"suffix":"days","title":"Deleted file retention","type":"integer"},"log_file_retention_days":{"suffix":"days","title":"Log retention","type":"integer"},"set_retention_properties":{"enum":[true]}}}]}},"properties":{"access_token":{"examples":["isoz8af6zvp8067gu68gvrp0oftevn"],"sensitive":true,"title":"Access Token","type":"string"},"cloud_provider":{"enum":[{"label":"AWS","value":"aws"},{"label":"Azure","value":"azure"}],"examples":["aws"],"title":"Cloud Provider (destination support only)","type":"string"},"enable_delta_uniform":{"default":false,"title":"Enable Delta UniForm tables","type":"boolean"},"enforce_query_limit":{"default":false,"title":"Limit concurrent queries","type":"boolean"},"http_path":{"default":"/sql","examples":["/sql"],"title":"HTTP Path","type":"string"},"port":{"default":443,"examples":[443],"title":"Port","type":"integer"},"server_hostname":{"examples":["dbc-1234dsafas-d0001.cloud.databricks.com"],"title":"Server Hostname","type":"string"},"unity_catalog_enabled":{"default":true,"title":"Unity Catalog enabled","type":"boolean"}},"required":["server_hostname","port","access_token","http_path","auth_mode"],"type":"object"}
