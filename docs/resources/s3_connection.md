---
# generated by https://github.com/fbreckle/terraform-plugin-docs
page_title: "polytomic_s3_connection Resource - terraform-provider-polytomic"
subcategory: "Connections"
description: |-
  S3 Connection
---

# polytomic_s3_connection (Resource)

S3 Connection

## Example Usage

```terraform
resource "polytomic_s3_connection" "s3" {
  name = "example"
  configuration = {
    auth_mode                = "iam_role"
    iam_role_arn             = "arn:aws:iam::XXXX:role/polytomic-s3"
    external_id              = "00000000-0000-0000-0000-000000000000"
    s3_bucket_region         = "us-east-1"
    s3_bucket_name           = "my-bucket"
    is_single_table          = true
    is_directory_snapshot    = true
    dir_glob_pattern         = "data/tables/*/*.csv"
    single_table_name        = "my_table"
    single_table_file_format = "csv"
    skip_lines               = 1
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `configuration` (Attributes) (see [below for nested schema](#nestedatt--configuration))
- `name` (String)

### Optional

- `force_destroy` (Boolean) Indicates whether dependent models, syncs, and bulk syncs should be cascade deleted when this connection is destroy. This only deletes other resources when the connection is destroyed, not when setting this parameter to `true`. Once this parameter is set to `true`, there must be a successful `terraform apply` run before a destroy is required to update this value in the resource state. Without a successful `terraform apply` after this parameter is set, this flag will have no effect. If setting this field in the same operation that would require replacing the connection or destroying the connection, this flag will not work. Additionally when importing a connection, a successful `terraform apply` is required to set this value in state before it will take effect on a destroy operation.
- `organization` (String) Organization ID

### Read-Only

- `id` (String) S3 Connection identifier

<a id="nestedatt--configuration"></a>
### Nested Schema for `configuration`

Required:

- `auth_mode` (String) Either `iam_role` or `access_key_and_secret`.
- `s3_bucket_name` (String)
- `s3_bucket_region` (String)

Optional:

- `aws_access_key_id` (String, Sensitive) The AWS access key ID. Required if `auth_mode` is `access_key_and_secret`.
- `aws_secret_access_key` (String, Sensitive) The AWS secret access key. Required if `auth_mode` is `access_key_and_secret`.
- `dir_glob_pattern` (String) Tables glob path. Required when `is_directory_snapshot` is `true`.
- `external_id` (String) The external ID (UUID) to use when assuming the IAM role.
- `iam_role_arn` (String) The ARN of the IAM role to assume. Required if `auth_mode` is `iam_role`.
- `is_directory_snapshot` (Boolean) Multi-directory multi-table mode. Default: `false`. Can only be used when `is_single_table` is `true`
- `is_single_table` (Boolean) Treat the files as a single table (time-based snapshots). Default: `false`.
- `single_table_file_format` (String) File format for single table mode. Valid values: `csv`, `json`, `parquet`, `avro`, `orc`. Default: `csv`. Required when `is_single_table` is `true`.
- `single_table_name` (String) Collection name for single table mode. Required when `is_single_table` is `true` and `is_directory_snapshot` is `false`.
- `skip_lines` (Number) Skip first N lines of each CSV file. Default: `0`. Only applicable when `single_table_file_format` is `csv`.


